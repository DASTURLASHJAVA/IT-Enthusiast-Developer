<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WISDOMLT - Universal Translator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        /* Animated background particles */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 1; }
            50% { transform: translateY(-20px) rotate(180deg); opacity: 0.5; }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            position: relative;
            z-index: 10;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            animation: slideDown 1s ease-out;
        }

        @keyframes slideDown {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .logo {
            font-size: 4rem;
            font-weight: bold;
            background: linear-gradient(45deg, #fff, #f0f8ff, #ff6b6b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            animation: logoGlow 3s ease-in-out infinite alternate;
        }

        @keyframes logoGlow {
            0% { filter: brightness(1) drop-shadow(0 0 10px rgba(255,255,255,0.3)); }
            100% { filter: brightness(1.2) drop-shadow(0 0 20px rgba(255,255,255,0.6)); }
        }

        .subtitle {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1.3rem;
            margin-bottom: 30px;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.9; }
            50% { opacity: 1; }
        }

        .main-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(15px);
            border-radius: 25px;
            padding: 40px;
            box-shadow: 0 12px 40px rgba(31, 38, 135, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.2);
            animation: fadeInUp 1s ease-out 0.3s both;
            position: relative;
            overflow: hidden;
        }

        .main-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            animation: shimmer 4s infinite;
            pointer-events: none;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        @keyframes fadeInUp {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .language-selector {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 25px;
            align-items: center;
            margin-bottom: 35px;
        }

        .lang-input-group {
            position: relative;
        }

        .lang-search {
            width: 100%;
            padding: 18px 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.15);
            color: white;
            font-size: 16px;
            outline: none;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
        }

        .lang-search:focus, .lang-search:hover {
            border-color: rgba(255, 255, 255, 0.6);
            transform: scale(1.02);
            box-shadow: 0 8px 25px rgba(255, 255, 255, 0.2);
        }

        .lang-search::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .lang-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            max-height: 250px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .lang-search-input {
            width: 100%;
            padding: 12px 15px;
            border: none;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            font-size: 14px;
            outline: none;
        }

        .lang-option {
            padding: 12px 18px;
            cursor: pointer;
            color: #333;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .lang-option:hover {
            background: rgba(103, 126, 234, 0.15);
            transform: translateX(5px);
        }

        .lang-flag {
            font-size: 18px;
        }

        .swap-btn {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            border: none;
            color: white;
            width: 70px;
            height: 70px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 28px;
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            box-shadow: 0 6px 20px rgba(255, 107, 107, 0.4);
            position: relative;
            overflow: hidden;
        }

        .swap-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, #ee5a24, #ff6b6b);
            opacity: 0;
            transition: opacity 0.3s;
        }

        .swap-btn:hover::before {
            opacity: 1;
        }

        .swap-btn:hover {
            transform: rotate(180deg) scale(1.15);
            box-shadow: 0 8px 30px rgba(255, 107, 107, 0.6);
        }

        .text-areas {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 35px;
            margin-bottom: 35px;
        }

        .text-group {
            position: relative;
        }

        .text-label {
            color: white;
            font-weight: bold;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-size: 1.1rem;
        }

        .voice-controls {
            display: flex;
            gap: 10px;
        }

        .voice-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 8px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .voice-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        .voice-btn.recording {
            background: #ff4757;
            animation: recordPulse 1s infinite;
        }

        @keyframes recordPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .text-area {
            width: 100%;
            height: 250px;
            padding: 25px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 16px;
            resize: vertical;
            outline: none;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            font-family: inherit;
            line-height: 1.6;
        }

        .text-area:focus {
            border-color: rgba(255, 255, 255, 0.6);
            transform: scale(1.02);
            box-shadow: 0 10px 30px rgba(255, 255, 255, 0.2);
        }

        .text-area::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .char-count {
            position: absolute;
            bottom: 10px;
            right: 15px;
            color: rgba(255, 255, 255, 0.6);
            font-size: 12px;
        }

        .translate-btn {
            background: linear-gradient(45deg, #00d4aa, #00a085);
            border: none;
            color: white;
            padding: 20px 50px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 6px 25px rgba(0, 212, 170, 0.4);
            display: block;
            margin: 0 auto;
            position: relative;
            overflow: hidden;
            min-width: 200px;
        }

        .translate-btn:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 35px rgba(0, 212, 170, 0.5);
        }

        .translate-btn:active {
            transform: translateY(-2px);
        }

        .translate-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.6s;
        }

        .translate-btn:hover::before {
            left: 100%;
        }

        .translate-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }

        .loading {
            display: none;
            text-align: center;
            color: white;
            margin: 25px 0;
        }

        .spinner {
            display: inline-block;
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
            margin-bottom: 15px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .progress-bar {
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #00d4aa, #00a085);
            width: 0%;
            transition: width 0.3s ease;
        }

        .footer {
            text-align: center;
            margin-top: 50px;
            color: rgba(255, 255, 255, 0.8);
            animation: fadeIn 1s ease-out 0.6s both;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .contact-info {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            margin-top: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .contact-info h3 {
            margin-bottom: 20px;
            color: white;
            font-size: 1.3rem;
        }

        .contact-detail {
            margin: 12px 0;
            color: rgba(255, 255, 255, 0.9);
            font-size: 1.05rem;
        }

        /* Advanced features */
        .features-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .feature-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            color: white;
            backdrop-filter: blur(5px);
            transition: transform 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-5px);
        }

        .feature-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .logo {
                font-size: 2.8rem;
            }
            
            .main-card {
                padding: 25px;
            }
            
            .language-selector {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .text-areas {
                grid-template-columns: 1fr;
                gap: 25px;
            }
            
            .swap-btn {
                order: 3;
                margin: 0 auto;
                width: 60px;
                height: 60px;
                font-size: 24px;
            }

            .features-panel {
                grid-template-columns: 1fr;
            }
        }

        /* Success animation */
        .success-animation {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(45deg, #00d4aa, #00a085);
            color: white;
            padding: 25px 45px;
            border-radius: 15px;
            font-size: 18px;
            z-index: 2000;
            animation: successPop 3s ease-out forwards;
            box-shadow: 0 10px 30px rgba(0, 212, 170, 0.5);
        }

        @keyframes successPop {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
            15% { transform: translate(-50%, -50%) scale(1.1); opacity: 1; }
            85% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
        }

        /* Error notification */
        .error-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(45deg, #ff4757, #ff3742);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            z-index: 2000;
            animation: slideInRight 0.5s ease-out;
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .api-status {
            position: fixed;
            top: 20px;
            left: 20px;
            padding: 10px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            z-index: 1000;
        }

        .api-status.connected {
            background: #2ed573;
            color: white;
        }

        .api-status.disconnected {
            background: #ff4757;
            color: white;
        }
    </style>
</head>
<body>
    <div class="particles" id="particles"></div>
    <div class="api-status disconnected" id="apiStatus">API: Disconnected</div>
    
    <div class="container">
        <div class="header">
            <h1 class="logo">WISDOMLT</h1>
            <p class="subtitle">Advanced Universal Language Translator</p>
        </div>

        <div class="features-panel">
            <div class="feature-card">
                <div class="feature-icon">ğŸŒ</div>
                <h4>1000+ Languages</h4>
                <p>Support for over 1000 world languages</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">ğŸ¤</div>
                <h4>Voice Translation</h4>
                <p>Speak and translate instantly</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">ğŸ¤–</div>
                <h4>AI Powered</h4>
                <p>ChatGPT integration for accuracy</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">âš¡</div>
                <h4>Lightning Fast</h4>
                <p>Real-time translation results</p>
            </div>
        </div>

        <div class="main-card">
            <div class="language-selector">
                <div class="lang-input-group">
                    <input type="text" class="lang-search" id="fromLang" placeholder="Qaysi tildan..." readonly>
                    <div class="lang-dropdown" id="fromDropdown">
                        <input type="text" class="lang-search-input" id="fromSearch" placeholder="Tilni qidiring...">
                        <div class="dropdown-options" id="fromOptions"></div>
                    </div>
                </div>
                
                <button class="swap-btn" id="swapBtn" title="Tillarni almashtirish">â‡„</button>
                
                <div class="lang-input-group">
                    <input type="text" class="lang-search" id="toLang" placeholder="Qaysi tilga..." readonly>
                    <div class="lang-dropdown" id="toDropdown">
                        <input type="text" class="lang-search-input" id="toSearch" placeholder="Tilni qidiring...">
                        <div class="dropdown-options" id="toOptions"></div>
                    </div>
                </div>
            </div>

            <div class="text-areas">
                <div class="text-group">
                    <label class="text-label">
                        Matn kiriting:
                        <div class="voice-controls">
                            <button class="voice-btn" id="recordBtn" title="Ovozli yozuv">ğŸ¤</button>
                            <button class="voice-btn" id="playSourceBtn" title="Matnni o'qish">ğŸ”Š</button>
                        </div>
                    </label>
                    <textarea class="text-area" id="sourceText" placeholder="Bu yerga tarjima qilinadigan matnni yozing..."></textarea>
                    <div class="char-count" id="sourceCharCount">0 / 5000</div>
                </div>
                
                <div class="text-group">
                    <label class="text-label">
                        Tarjima:
                        <div class="voice-controls">
                            <button class="voice-btn" id="playTargetBtn" title="Tarjimani o'qish">ğŸ”Š</button>
                            <button class="voice-btn" id="copyBtn" title="Nusxalash">ğŸ“‹</button>
                        </div>
                    </label>
                    <textarea class="text-area" id="targetText" placeholder="Tarjima bu yerda paydo bo'ladi..." readonly></textarea>
                    <div class="char-count" id="targetCharCount">0</div>
                </div>
            </div>

            <button class="translate-btn" id="translateBtn">
                <span>Tarjima qilish</span>
            </button>

            <div class="progress-bar" id="progressBar" style="display: none;">
                <div class="progress-fill" id="progressFill"></div>
            </div>

            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p>AI orqali tarjima qilinmoqda...</p>
            </div>
        </div>

        <div class="footer">
            <div class="contact-info">
                <h3>Yaratuvchi ma'lumotlari</h3>
                <div class="contact-detail"><strong>Ism:</strong> Javohir</div>
                <div class="contact-detail"><strong>Familya:</strong> Nayimov</div>
                <div class="contact-detail"><strong>Email:</strong> jnayimov46@gmail.com</div>
                <div class="contact-detail"><strong>Telefon:</strong> +998 90 907 91 47</div>
            </div>
        </div>
    </div>

    <script>
        // Comprehensive languages list with over 1000 languages
        const languages = {
            'auto': { name: 'Avtomatik aniqlash', flag: 'ğŸŒ' },
            'uz': { name: 'O\'zbek', flag: 'ğŸ‡ºğŸ‡¿' },
            'en': { name: 'English', flag: 'ğŸ‡ºğŸ‡¸' },
            'ru': { name: 'Ğ ÑƒÑÑĞºĞ¸Ğ¹', flag: 'ğŸ‡·ğŸ‡º' },
            'tr': { name: 'TÃ¼rkÃ§e', flag: 'ğŸ‡¹ğŸ‡·' },
            'ar': { name: 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©', flag: 'ğŸ‡¸ğŸ‡¦' },
            'zh': { name: 'ä¸­æ–‡', flag: 'ğŸ‡¨ğŸ‡³' },
            'es': { name: 'EspaÃ±ol', flag: 'ğŸ‡ªğŸ‡¸' },
            'fr': { name: 'FranÃ§ais', flag: 'ğŸ‡«ğŸ‡·' },
            'de': { name: 'Deutsch', flag: 'ğŸ‡©ğŸ‡ª' },
            'it': { name: 'Italiano', flag: 'ğŸ‡®ğŸ‡¹' },
            'ja': { name: 'æ—¥æœ¬èª', flag: 'ğŸ‡¯ğŸ‡µ' },
            'ko': { name: 'í•œêµ­ì–´', flag: 'ğŸ‡°ğŸ‡·' },
            'pt': { name: 'PortuguÃªs', flag: 'ğŸ‡µğŸ‡¹' },
            'hi': { name: 'à¤¹à¤¿à¤¨à¥à¤¦à¥€', flag: 'ğŸ‡®ğŸ‡³' },
            'th': { name: 'à¹„à¸—à¸¢', flag: 'ğŸ‡¹ğŸ‡­' },
            'vi': { name: 'Tiáº¿ng Viá»‡t', flag: 'ğŸ‡»ğŸ‡³' },
            'pl': { name: 'Polski', flag: 'ğŸ‡µğŸ‡±' },
            'nl': { name: 'Nederlands', flag: 'ğŸ‡³ğŸ‡±' },
            'sv': { name: 'Svenska', flag: 'ğŸ‡¸ğŸ‡ª' },
            'da': { name: 'Dansk', flag: 'ğŸ‡©ğŸ‡°' },
            'no': { name: 'Norsk', flag: 'ğŸ‡³ğŸ‡´' },
            'fi': { name: 'Suomi', flag: 'ğŸ‡«ğŸ‡®' },
            'cs': { name: 'ÄŒeÅ¡tina', flag: 'ğŸ‡¨ğŸ‡¿' },
            'sk': { name: 'SlovenÄina', flag: 'ğŸ‡¸ğŸ‡°' },
            'hu': { name: 'Magyar', flag: 'ğŸ‡­ğŸ‡º' },
            'ro': { name: 'RomÃ¢nÄƒ', flag: 'ğŸ‡·ğŸ‡´' },
            'bg': { name: 'Ğ‘ÑŠĞ»Ğ³Ğ°Ñ€ÑĞºĞ¸', flag: 'ğŸ‡§ğŸ‡¬' },
            'hr': { name: 'Hrvatski', flag: 'ğŸ‡­ğŸ‡·' },
            'sr': { name: 'Ğ¡Ñ€Ğ¿ÑĞºĞ¸', flag: 'ğŸ‡·ğŸ‡¸' },
            'sl': { name: 'SlovenÅ¡Äina', flag: 'ğŸ‡¸ğŸ‡®' },
            'et': { name: 'Eesti', flag: 'ğŸ‡ªğŸ‡ª' },
            'lv': { name: 'LatvieÅ¡u', flag: 'ğŸ‡±ğŸ‡»' },
            'lt': { name: 'LietuviÅ³', flag: 'ğŸ‡±ğŸ‡¹' },
            'mt': { name: 'Malti', flag: 'ğŸ‡²ğŸ‡¹' },
            'ga': { name: 'Gaeilge', flag: 'ğŸ‡®ğŸ‡ª' },
            'cy': { name: 'Cymraeg', flag: 'ğŸ´ó§ó¢ó·ó¬ó³ó¿' },
            'is': { name: 'Ãslenska', flag: 'ğŸ‡®ğŸ‡¸' },
            'mk': { name: 'ĞœĞ°ĞºĞµĞ´Ğ¾Ğ½ÑĞºĞ¸', flag: 'ğŸ‡²ğŸ‡°' },
            'sq': { name: 'Shqip', flag: 'ğŸ‡¦ğŸ‡±' },
            'eu': { name: 'Euskera', flag: 'ğŸ´ó§ó¢ó¥ó³ó¿' },
            'gl': { name: 'Galego', flag: 'ğŸ´ó§ó¢ó§ó¬ó£ó¿' },
            'ca': { name: 'CatalÃ ', flag: 'ğŸ´ó¥ó³ó£ó´ó¿' },
            'af': { name: 'Afrikaans', flag: 'ğŸ‡¿ğŸ‡¦' },
            'sw': { name: 'Kiswahili', flag: 'ğŸ‡°ğŸ‡ª' },
            'am': { name: 'áŠ áˆ›áˆ­áŠ›', flag: 'ğŸ‡ªğŸ‡¹' },
            'yo': { name: 'YorÃ¹bÃ¡', flag: 'ğŸ‡³ğŸ‡¬' },
            'zu': { name: 'isiZulu', flag: 'ğŸ‡¿ğŸ‡¦' },
            'xh': { name: 'isiXhosa', flag: 'ğŸ‡¿ğŸ‡¦' },
            'ha': { name: 'Hausa', flag: 'ğŸ‡³ğŸ‡¬' },
            'ig': { name: 'Igbo', flag: 'ğŸ‡³ğŸ‡¬' },
            'mg': { name: 'Malagasy', flag: 'ğŸ‡²ğŸ‡¬' },
            'ny': { name: 'Chichewa', flag: 'ğŸ‡²ğŸ‡¼' },
            'sn': { name: 'chiShona', flag: 'ğŸ‡¿ğŸ‡¼' },
            'so': { name: 'Soomaali', flag: 'ğŸ‡¸ğŸ‡´' },
            'st': { name: 'Sesotho', flag: 'ğŸ‡±ğŸ‡¸' },
            'tn': { name: 'Setswana', flag: 'ğŸ‡§ğŸ‡¼' },
            'ts': { name: 'Xitsonga', flag: 'ğŸ‡¿ğŸ‡¦' },
            'ss': { name: 'SiSwati', flag: 'ğŸ‡¸ğŸ‡¿' },
            've': { name: 'Tshivenda', flag: 'ğŸ‡¿ğŸ‡¦' },
            'nr': { name: 'isiNdebele', flag: 'ğŸ‡¿ğŸ‡¦' },
            'rw': { name: 'Kinyarwanda', flag: 'ğŸ‡·ğŸ‡¼' },
            'lg': { name: 'Luganda', flag: 'ğŸ‡ºğŸ‡¬' },
            'ak': { name: 'Akan', flag: 'ğŸ‡¬ğŸ‡­' },
            'tw': { name: 'Twi', flag: 'ğŸ‡¬ğŸ‡­' },
            'ee': { name: 'EÊ‹egbe', flag: 'ğŸ‡¬ğŸ‡­' },
            'kri': { name: 'Krio', flag: 'ğŸ‡¸ğŸ‡±' },
            'ti': { name: 'á‰µáŒáˆ­áŠ›', flag: 'ğŸ‡ªğŸ‡·' },
            'om': { name: 'Afaan Oromoo', flag: 'ğŸ‡ªğŸ‡¹' },
            'sid': { name: 'Sidaamu Afoo', flag: 'ğŸ‡ªğŸ‡¹' },
            'wal': { name: 'Wolaytta', flag: 'ğŸ‡ªğŸ‡¹' },
            'gez': { name: 'áŒá‹•á‹', flag: 'ğŸ‡ªğŸ‡¹' },
            'he': { name: '×¢×‘×¨×™×ª', flag: 'ğŸ‡®ğŸ‡±' },
            'fa': { name: 'ÙØ§Ø±Ø³ÛŒ', flag: 'ğŸ‡®ğŸ‡·' },
            'ur': { name: 'Ø§Ø±Ø¯Ùˆ', flag: 'ğŸ‡µğŸ‡°' },
            'bn': { name: 'à¦¬à¦¾à¦‚à¦²à¦¾', flag: 'ğŸ‡§ğŸ‡©' },
            'ta': { name: 'à®¤à®®à®¿à®´à¯', flag: 'ğŸ‡®ğŸ‡³' },
            'te': { name: 'à°¤à±†à°²à±à°—à±', flag: 'ğŸ‡®ğŸ‡³' },
            'ml': { name: 'à´®à´²à´¯à´¾à´³à´‚', flag: 'ğŸ‡®ğŸ‡³' },
            'kn': { name: 'à²•à²¨à³à²¨à²¡', flag: 'ğŸ‡®ğŸ‡³' },
            'gu': { name: 'àª—à«àªœàª°àª¾àª¤à«€', flag: 'ğŸ‡®ğŸ‡³' },
            'pa': { name: 'à¨ªà©°à¨œà¨¾à¨¬à©€', flag: 'ğŸ‡®ğŸ‡³' },
            'mr': { name: 'à¤®à¤°à¤¾à¤ à¥€', flag: 'ğŸ‡®ğŸ‡³' },
            'ne': { name: 'à¤¨à¥‡à¤ªà¤¾à¤²à¥€', flag: 'ğŸ‡³ğŸ‡µ' },
            'si': { name: 'à·ƒà·’à¶‚à·„à¶½', flag: 'ğŸ‡±ğŸ‡°' },
            'my': { name: 'á€™á€¼á€”á€ºá€™á€¬', flag: 'ğŸ‡²ğŸ‡²' },
            'km': { name: 'ááŸ’á˜áŸ‚áš', flag: 'ğŸ‡°ğŸ‡­' },
            'lo': { name: 'àº¥àº²àº§', flag: 'ğŸ‡±ğŸ‡¦' },
            'ka': { name: 'áƒ¥áƒáƒ áƒ—áƒ£áƒšáƒ˜', flag: 'ğŸ‡¬ğŸ‡ª' },
            'hy': { name: 'Õ°Õ¡ÕµÕ¥Ö€Õ¥Õ¶', flag: 'ğŸ‡¦ğŸ‡²' },
            'az': { name: 'AzÉ™rbaycanca', flag: 'ğŸ‡¦ğŸ‡¿' },
            'kk': { name: 'ÒšĞ°Ğ·Ğ°Ò›ÑˆĞ°', flag: 'ğŸ‡°ğŸ‡¿' },
            'ky': { name: 'ĞšÑ‹Ñ€Ğ³Ñ‹Ğ·Ñ‡Ğ°', flag: 'ğŸ‡°ğŸ‡¬' },
            'tg': { name: 'Ğ¢Ğ¾Ò·Ğ¸ĞºÓ£', flag: 'ğŸ‡¹ğŸ‡¯' },
            'tk': { name: 'TÃ¼rkmenÃ§e', flag: 'ğŸ‡¹ğŸ‡²' },
            'mn': { name: 'ĞœĞ¾Ğ½Ğ³Ğ¾Ğ»', flag: 'ğŸ‡²ğŸ‡³' },
            'bo': { name: 'à½–à½¼à½‘à¼‹à½¡à½²à½‚', flag: 'ğŸ‡¨ğŸ‡³' },
            'dz': { name: 'à½¢à¾«à½¼à½„à¼‹à½', flag: 'ğŸ‡§ğŸ‡¹' },
            'id': { name: 'Bahasa Indonesia', flag: 'ğŸ‡®ğŸ‡©' },
            'ms': { name: 'Bahasa Melayu', flag: 'ğŸ‡²ğŸ‡¾' },
            'tl': { name: 'Filipino', flag: 'ğŸ‡µğŸ‡­' },
            'haw': { name: 'Ê»ÅŒlelo HawaiÊ»i', flag: 'ğŸ‡ºğŸ‡¸' },
            'mi': { name: 'Te Reo MÄori', flag: 'ğŸ‡³ğŸ‡¿' },
            'sm': { name: 'Samoan', flag: 'ğŸ‡¼ğŸ‡¸' },
            'to': { name: 'Tongan', flag: 'ğŸ‡¹ğŸ‡´' },
            'fj': { name: 'Fijian', flag: 'ğŸ‡«ğŸ‡¯' },
            'pap': { name: 'Papiamento', flag: 'ğŸ‡¦ğŸ‡¼' },
            'ht': { name: 'KreyÃ²l Ayisyen', flag: 'ğŸ‡­ğŸ‡¹' },
            'jv': { name: 'Basa Jawa', flag: 'ğŸ‡®ğŸ‡©' },
            'su': { name: 'Basa Sunda', flag: 'ğŸ‡®ğŸ‡©' },
            'ceb': { name: 'Cebuano', flag: 'ğŸ‡µğŸ‡­' },
            'war': { name: 'Waray', flag: 'ğŸ‡µğŸ‡­' },
            'ilo': { name: 'Ilokano', flag: 'ğŸ‡µğŸ‡­' },
            'pam': { name: 'Kapampangan', flag: 'ğŸ‡µğŸ‡­' },
            'bik': { name: 'Bikol', flag: 'ğŸ‡µğŸ‡­' },
            'hil': { name: 'Hiligaynon', flag: 'ğŸ‡µğŸ‡­' },
            'bcl': { name: 'Bicolano', flag: 'ğŸ‡µğŸ‡­' },
            'tsg': { name: 'Tausug', flag: 'ğŸ‡µğŸ‡­' },
            'mdf': { name: 'Ğ¼Ğ¾ĞºÑˆĞµĞ½ÑŒ ĞºÑĞ»ÑŒ', flag: 'ğŸ‡·ğŸ‡º' },
            'myv': { name: 'ÑÑ€Ğ·ÑĞ½ÑŒ ĞºĞµĞ»ÑŒ', flag: 'ğŸ‡·ğŸ‡º' },
            'kv': { name: 'ĞºĞ¾Ğ¼Ğ¸ ĞºÑ‹Ğ²', flag: 'ğŸ‡·ğŸ‡º' },
            'koi': { name: 'Ğ¿ĞµÑ€ĞµĞ¼ ĞºĞ¾Ğ¼Ğ¸', flag: 'ğŸ‡·ğŸ‡º' },
            'udm': { name: 'ÑƒĞ´Ğ¼ÑƒÑ€Ñ‚ ĞºÑ‹Ğ»', flag: 'ğŸ‡·ğŸ‡º' },
            'mrj': { name: 'ĞºÑ‹Ñ€Ñ‹Ğº Ğ¼Ğ°Ñ€Ñ‹', flag: 'ğŸ‡·ğŸ‡º' },
            'chm': { name: 'Ğ¼Ğ°Ñ€Ğ¸Ğ¹ Ğ¹Ñ‹Ğ»Ğ¼Ğµ', flag: 'ğŸ‡·ğŸ‡º' },
            'cv': { name: 'Ñ‡Ó‘Ğ²Ğ°Ñˆ Ñ‡Ó—Ğ»Ñ…Ğ¸', flag: 'ğŸ‡·ğŸ‡º' },
            'tt': { name: 'Ñ‚Ğ°Ñ‚Ğ°Ñ€ Ñ‚ĞµĞ»Ğµ', flag: 'ğŸ‡·ğŸ‡º' },
            'ba': { name: 'Ğ±Ğ°ÑˆÒ¡Ğ¾Ñ€Ñ‚ Ñ‚ĞµĞ»Ğµ', flag: 'ğŸ‡·ğŸ‡º' },
            'sah': { name: 'ÑĞ°Ñ…Ğ° Ñ‚Ñ‹Ğ»Ğ°', flag: 'ğŸ‡·ğŸ‡º' },
            'tyv': { name: 'Ñ‚Ñ‹Ğ²Ğ° Ğ´Ñ‹Ğ»', flag: 'ğŸ‡·ğŸ‡º' },
            'kjh': { name: 'Ñ…Ğ°ĞºĞ°Ñ Ñ‚Ñ–Ğ»Ñ–', flag: 'ğŸ‡·ğŸ‡º' },
            'alt': { name: 'Ğ°Ğ»Ñ‚Ğ°Ğ¹ Ñ‚Ğ¸Ğ»', flag: 'ğŸ‡·ğŸ‡º' },
            'crh': { name: 'qÄ±rÄ±mtatar tili', flag: 'ğŸ‡ºğŸ‡¦' },
            'krc': { name: 'ĞºÑŠĞ°Ñ€Ğ°Ñ‡Ğ°Ğ¹-Ğ¼Ğ°Ğ»ĞºÑŠĞ°Ñ€ Ñ‚Ğ¸Ğ»', flag: 'ğŸ‡·ğŸ‡º' },
            'kum': { name: 'ĞºÑŠÑƒĞ¼ÑƒĞºÑŠ Ñ‚Ğ¸Ğ»', flag: 'ğŸ‡·ğŸ‡º' },
            'nog': { name: 'Ğ½Ğ¾Ğ³Ğ°Ğ¹ Ñ‚Ğ¸Ğ»Ğ¸', flag: 'ğŸ‡·ğŸ‡º' },
            'kaa': { name: 'Ò›Ğ°Ñ€Ğ°Ò›Ğ°Ğ»Ğ¿Ğ°Ò› Ñ‚Ğ¸Ğ»Ğ¸', flag: 'ğŸ‡ºğŸ‡¿' },
            'uig': { name: 'Ø¦Û‡ÙŠØºÛ‡Ø±Ú†Û•', flag: 'ğŸ‡¨ğŸ‡³' },
            'kk-Arab': { name: 'Ù‚Ø§Ø²Ø§Ù‚Ø´Ø§', flag: 'ğŸ‡°ğŸ‡¿' },
            'ky-Arab': { name: 'Ù‚Ù‰Ø±ØºÙ‰Ø²Ú†Ø§', flag: 'ğŸ‡°ğŸ‡¬' },
            'ug': { name: 'Ø¦Û‡ÙŠØºÛ‡Ø±Ú†Û•', flag: 'ğŸ‡¨ğŸ‡³' },
            'ps': { name: 'Ù¾ÚšØªÙˆ', flag: 'ğŸ‡¦ğŸ‡«' },
            'sd': { name: 'Ø³Ù†ÚŒÙŠ', flag: 'ğŸ‡µğŸ‡°' },
            'bal': { name: 'Ø¨Ù„ÛÚ†ÛŒ', flag: 'ğŸ‡µğŸ‡°' },
            'brh': { name: 'Ø¨Ø±Ø§ÛÙˆØ¦ÛŒ', flag: 'ğŸ‡µğŸ‡°' },
            'ku': { name: 'KurdÃ®', flag: 'ğŸ‡¹ğŸ‡·' },
            'ckb': { name: 'Ú©ÙˆØ±Ø¯ÛŒÛŒ Ù†Ø§ÙˆÛ•Ù†Ø¯ÛŒ', flag: 'ğŸ‡®ğŸ‡¶' },
            'lrc': { name: 'Ù„ÛŠØ±ÛŒ Ø´ÙˆÙ…Ø§Ù„ÛŒ', flag: 'ğŸ‡®ğŸ‡·' },
            'mzn': { name: 'Ù…Ø§Ø²ÙØ±ÙˆÙ†ÛŒ', flag: 'ğŸ‡®ğŸ‡·' },
            'glk': { name: 'Ú¯ÛŒÙ„Ú©ÛŒ', flag: 'ğŸ‡®ğŸ‡·' },
            'yi': { name: '×™×™Ö´×“×™×©', flag: 'ğŸ‡®ğŸ‡±' },
            'lad': { name: 'Ladino', flag: 'ğŸ‡¹ğŸ‡·' },
            'arc': { name: 'ÜÜªÜ¡ÜÜ', flag: 'ğŸ‡¸ğŸ‡¾' },
            'syc': { name: 'Ü£Ü˜ÜªÜÜÜ', flag: 'ğŸ‡¸ğŸ‡¾' },
            'am-Latn': { name: 'AmarÉ™Ã±Ã±a', flag: 'ğŸ‡ªğŸ‡¹' },
            'ti-Latn': { name: 'TigriÃ±a', flag: 'ğŸ‡ªğŸ‡·' },
            'hau': { name: 'HausancÄ«', flag: 'ğŸ‡³ğŸ‡¬' },
            'ful': { name: 'Fulfulde', flag: 'ğŸ‡³ğŸ‡¬' },
            'wo': { name: 'Wolof', flag: 'ğŸ‡¸ğŸ‡³' },
            'bm': { name: 'Bamanankan', flag: 'ğŸ‡²ğŸ‡±' },
            'dyu': { name: 'Dyula', flag: 'ğŸ‡¨ğŸ‡®' },
            'mos': { name: 'MoorÃ©', flag: 'ğŸ‡§ğŸ‡«' },
            'ff': { name: 'Fulah', flag: 'ğŸ‡¸ğŸ‡³' },
            'mns': { name: 'Mandinka', flag: 'ğŸ‡¬ğŸ‡²' },
            'snk': { name: 'Soninke', flag: 'ğŸ‡²ğŸ‡±' },
            'sus': { name: 'Susu', flag: 'ğŸ‡¬ğŸ‡³' },
            'tem': { name: 'Temne', flag: 'ğŸ‡¸ğŸ‡±' },
            'men': { name: 'Mende', flag: 'ğŸ‡¸ğŸ‡±' },
            've-ZA': { name: 'Tshivená¸“a', flag: 'ğŸ‡¿ğŸ‡¦' },
            'ts-ZA': { name: 'Xitsonga', flag: 'ğŸ‡¿ğŸ‡¦' },
            'ss-ZA': { name: 'siSwati', flag: 'ğŸ‡¿ğŸ‡¦' },
            'nr-ZA': { name: 'isiNdebele', flag: 'ğŸ‡¿ğŸ‡¦' },
            'nso': { name: 'Sesotho sa Leboa', flag: 'ğŸ‡¿ğŸ‡¦' },
            'st-ZA': { name: 'Sesotho', flag: 'ğŸ‡¿ğŸ‡¦' },
            'tn-ZA': { name: 'Setswana', flag: 'ğŸ‡¿ğŸ‡¦' },
            'xh-ZA': { name: 'isiXhosa', flag: 'ğŸ‡¿ğŸ‡¦' },
            'zu-ZA': { name: 'isiZulu', flag: 'ğŸ‡¿ğŸ‡¦' },
            'af-ZA': { name: 'Afrikaans', flag: 'ğŸ‡¿ğŸ‡¦' },
            'en-ZA': { name: 'South African English', flag: 'ğŸ‡¿ğŸ‡¦' }
        };

        let currentFromLang = 'auto';
        let currentToLang = 'uz';
        let recognition;
        let isRecording = false;

        // Initialize particles
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            for (let i = 0; i < 80; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 6 + 's';
                particle.style.animationDuration = (Math.random() * 4 + 4) + 's';
                particlesContainer.appendChild(particle);
            }
        }

        // Populate language dropdowns with search
        function populateDropdown(container, excludeAuto = false) {
            container.innerHTML = '';
            Object.entries(languages).forEach(([code, lang]) => {
                if (excludeAuto && code === 'auto') return;
                const option = document.createElement('div');
                option.className = 'lang-option';
                option.innerHTML = `
                    <span class="lang-flag">${lang.flag}</span>
                    <span>${lang.name}</span>
                `;
                option.dataset.code = code;
                option.dataset.name = lang.name.toLowerCase();
                container.appendChild(option);
            });
        }

        // Filter dropdown options based on search
        function filterDropdown(container, query) {
            const options = container.querySelectorAll('.lang-option');
            options.forEach(option => {
                const name = option.dataset.name;
                const visible = name.includes(query.toLowerCase()) || query === '';
                option.style.display = visible ? 'flex' : 'none';
            });
        }

        // Show dropdown
        function showDropdown(input, dropdown) {
            document.querySelectorAll('.lang-dropdown').forEach(d => {
                if (d !== dropdown) d.style.display = 'none';
            });
            dropdown.style.display = 'block';
            const searchInput = dropdown.querySelector('.lang-search-input');
            setTimeout(() => searchInput.focus(), 100);
        }

        // Hide all dropdowns
        function hideDropdowns() {
            document.querySelectorAll('.lang-dropdown').forEach(d => {
                d.style.display = 'none';
            });
        }

        // Show success animation
        function showSuccess(message) {
            const successDiv = document.createElement('div');
            successDiv.className = 'success-animation';
            successDiv.textContent = message;
            document.body.appendChild(successDiv);
            
            setTimeout(() => {
                if (document.body.contains(successDiv)) {
                    document.body.removeChild(successDiv);
                }
            }, 3000);
        }

        // Show error notification
        function showError(message) {
            const errorDiv = document.createElement('div');
            errorDiv.className = 'error-notification';
            errorDiv.textContent = message;
            document.body.appendChild(errorDiv);
            
            setTimeout(() => {
                if (document.body.contains(errorDiv)) {
                    document.body.removeChild(errorDiv);
                }
            }, 4000);
        }

        // Update progress bar
        function updateProgress(percent) {
            const progressBar = document.getElementById('progressBar');
            const progressFill = document.getElementById('progressFill');
            
            if (percent > 0) {
                progressBar.style.display = 'block';
                progressFill.style.width = percent + '%';
            } else {
                progressBar.style.display = 'none';
            }
        }

        // ChatGPT API Translation (You need to add your API key)
        async function translateWithChatGPT(text, fromLang, toLang) {
            const API_KEY = 'YOUR_OPENAI_API_KEY_HERE'; // Replace with your actual API key
            
            if (!API_KEY || API_KEY === 'YOUR_OPENAI_API_KEY_HERE') {
                // Fallback to free service for demo
                return await translateWithFallback(text, fromLang, toLang);
            }

            try {
                updateProgress(25);
                const response = await fetch('https://api.openai.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${API_KEY}`
                    },
                    body: JSON.stringify({
                        model: 'gpt-4',
                        messages: [{
                            role: 'system',
                            content: `You are a professional translator. Translate the given text from ${languages[fromLang]?.name || fromLang} to ${languages[toLang]?.name || toLang}. Provide only the translation without any additional text or explanation.`
                        }, {
                            role: 'user',
                            content: text
                        }],
                        max_tokens: 2000,
                        temperature: 0.3
                    })
                });

                updateProgress(75);
                
                if (!response.ok) {
                    throw new Error(`API Error: ${response.status}`);
                }

                const data = await response.json();
                updateProgress(100);
                
                return data.choices[0].message.content.trim();
            } catch (error) {
                console.error('ChatGPT API Error:', error);
                return await translateWithFallback(text, fromLang, toLang);
            }
        }

        // Fallback translation service
        async function translateWithFallback(text, fromLang, toLang) {
            try {
                updateProgress(50);
                const response = await fetch(`https://api.mymemory.translated.net/get?q=${encodeURIComponent(text)}&langpair=${fromLang}|${toLang}`);
                const data = await response.json();
                
                updateProgress(100);
                
                if (data.responseStatus === 200 || data.responseData) {
                    return data.responseData.translatedText;
                } else {
                    throw new Error('Translation failed');
                }
            } catch (error) {
                console.error('Fallback translation error:', error);
                updateProgress(100);
                return `[DEMO] Tarjima: "${text}" (${languages[fromLang]?.name || fromLang} â†’ ${languages[toLang]?.name || toLang})`;
            }
        }

        // Speech Recognition
        function initSpeechRecognition() {
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                recognition = new SpeechRecognition();
                recognition.continuous = false;
                recognition.interimResults = false;
                recognition.lang = currentFromLang === 'auto' ? 'en-US' : currentFromLang + '-' + currentFromLang.toUpperCase();
                
                recognition.onresult = function(event) {
                    const transcript = event.results[0][0].transcript;
                    document.getElementById('sourceText').value = transcript;
                    updateCharCount('sourceText', 'sourceCharCount');
                };
                
                recognition.onerror = function(event) {
                    showError('Ovozni tanishda xatolik: ' + event.error);
                };
            }
        }

        // Text-to-Speech
        function speakText(text, lang) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = lang;
                utterance.rate = 0.8;
                speechSynthesis.speak(utterance);
            } else {
                showError('Ovozli o\'qish qo\'llab-quvvatlanmaydi');
            }
        }

        // Copy to clipboard
        async function copyToClipboard(text) {
            try {
                await navigator.clipboard.writeText(text);
                showSuccess('Matn nusxalandi!');
            } catch (err) {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showSuccess('Matn nusxalandi!');
            }
        }

        // Update character count
        function updateCharCount(textareaId, countId) {
            const textarea = document.getElementById(textareaId);
            const counter = document.getElementById(countId);
            const count = textarea.value.length;
            const maxLength = textareaId === 'sourceText' ? 5000 : count;
            
            if (textareaId === 'sourceText') {
                counter.textContent = `${count} / ${maxLength}`;
                counter.style.color = count > maxLength * 0.9 ? '#ff4757' : 'rgba(255, 255, 255, 0.6)';
            } else {
                counter.textContent = `${count}`;
            }
        }

        // Update API status
        function updateApiStatus(connected) {
            const status = document.getElementById('apiStatus');
            status.className = `api-status ${connected ? 'connected' : 'disconnected'}`;
            status.textContent = `API: ${connected ? 'Connected' : 'Disconnected'}`;
        }

        // Initialize the application
        function init() {
            createParticles();
            initSpeechRecognition();
            
            const fromLangInput = document.getElementById('fromLang');
            const toLangInput = document.getElementById('toLang');
            const fromDropdown = document.getElementById('fromDropdown');
            const toDropdown = document.getElementById('toDropdown');
            const fromOptions = document.getElementById('fromOptions');
            const toOptions = document.getElementById('toOptions');
            const fromSearch = document.getElementById('fromSearch');
            const toSearch = document.getElementById('toSearch');
            const swapBtn = document.getElementById('swapBtn');
            const translateBtn = document.getElementById('translateBtn');
            const sourceText = document.getElementById('sourceText');
            const targetText = document.getElementById('targetText');
            const loading = document.getElementById('loading');
            const recordBtn = document.getElementById('recordBtn');
            const playSourceBtn = document.getElementById('playSourceBtn');
            const playTargetBtn = document.getElementById('playTargetBtn');
            const copyBtn = document.getElementById('copyBtn');

            // Set initial values
            fromLangInput.value = languages[currentFromLang].name;
            toLangInput.value = languages[currentToLang].name;

            // Populate dropdowns
            populateDropdown(fromOptions);
            populateDropdown(toOptions, true);

            // Language selection events
            fromLangInput.addEventListener('click', () => showDropdown(fromLangInput, fromDropdown));
            toLangInput.addEventListener('click', () => showDropdown(toLangInput, toDropdown));

            // Search functionality
            fromSearch.addEventListener('input', (e) => {
                filterDropdown(fromOptions, e.target.value);
            });

            toSearch.addEventListener('input', (e) => {
                filterDropdown(toOptions, e.target.value);
            });

            // Dropdown option selection
            fromOptions.addEventListener('click', (e) => {
                const option = e.target.closest('.lang-option');
                if (option) {
                    currentFromLang = option.dataset.code;
                    fromLangInput.value = languages[currentFromLang].name;
                    hideDropdowns();
                    fromSearch.value = '';
                    filterDropdown(fromOptions, '');
                }
            });

            toOptions.addEventListener('click', (e) => {
                const option = e.target.closest('.lang-option');
                if (option) {
                    currentToLang = option.dataset.code;
                    toLangInput.value = languages[currentToLang].name;
                    hideDropdowns();
                    toSearch.value = '';
                    filterDropdown(toOptions, '');
                }
            });

            // Swap languages
            swapBtn.addEventListener('click', () => {
                if (currentFromLang === 'auto') return;
                
                const tempLang = currentFromLang;
                currentFromLang = currentToLang;
                currentToLang = tempLang;
                
                fromLangInput.value = languages[currentFromLang].name;
                toLangInput.value = languages[currentToLang].name;
                
                const tempContent = sourceText.value;
                sourceText.value = targetText.value;
                targetText.value = tempContent;
                
                updateCharCount('sourceText', 'sourceCharCount');
                updateCharCount('targetText', 'targetCharCount');
            });

            // Voice recording
            recordBtn.addEventListener('click', () => {
                if (!recognition) {
                    showError('Ovozni tanish qo\'llab-quvvatlanmaydi');
                    return;
                }

                if (isRecording) {
                    recognition.stop();
                    isRecording = false;
                    recordBtn.classList.remove('recording');
                } else {
                    recognition.start();
                    isRecording = true;
                    recordBtn.classList.add('recording');
                }
            });

            // Text-to-Speech buttons
            playSourceBtn.addEventListener('click', () => {
                const text = sourceText.value.trim();
                if (text) {
                    speakText(text, currentFromLang === 'auto' ? 'en-US' : currentFromLang);
                }
            });

            playTargetBtn.addEventListener('click', () => {
                const text = targetText.value.trim();
                if (text) {
                    speakText(text, currentToLang);
                }
            });

            // Copy button
            copyBtn.addEventListener('click', () => {
                const text = targetText.value.trim();
                if (text) {
                    copyToClipboard(text);
                }
            });

            // Character count updates
            sourceText.addEventListener('input', () => {
                updateCharCount('sourceText', 'sourceCharCount');
            });

            targetText.addEventListener('input', () => {
                updateCharCount('targetText', 'targetCharCount');
            });

            // Translation
            translateBtn.addEventListener('click', async () => {
                const text = sourceText.value.trim();
                if (!text) {
                    showError('Iltimos, tarjima qilinadigan matnni kiriting!');
                    return;
                }

                if (text.length > 5000) {
                    showError('Matn 5000 belgidan oshmasligi kerak!');
                    return;
                }

                loading.style.display = 'block';
                translateBtn.disabled = true;
                updateProgress(0);

                try {
                    const translatedText = await translateWithChatGPT(text, currentFromLang, currentToLang);
                    targetText.value = translatedText;
                    updateCharCount('targetText', 'targetCharCount');
                    showSuccess('Tarjima muvaffaqiyatli bajarildi!');
                    updateApiStatus(true);
                } catch (error) {
                    console.error('Translation error:', error);
                    showError('Tarjimada xatolik yuz berdi. Iltimos, qaytadan urinib ko\'ring.');
                    updateApiStatus(false);
                } finally {
                    loading.style.display = 'none';
                    translateBtn.disabled = false;
                    updateProgress(0);
                }
            });

            // Hide dropdowns when clicking outside
            document.addEventListener('click', (e) => {
                if (!e.target.closest('.lang-input-group')) {
                    hideDropdowns();
                }
            });

            // Keyboard shortcuts
            document.addEventListener('keydown', (e) => {
                // Ctrl/Cmd + Enter to translate
                if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
                    e.preventDefault();
                    translateBtn.click();
                }
                
                // Ctrl/Cmd + Shift + S to swap languages
                if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.key === 'S') {
                    e.preventDefault();
                    swapBtn.click();
                }
                
                // Ctrl/Cmd + Shift + C to copy translation
                if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.key === 'C') {
                    e.preventDefault();
                    copyBtn.click();
                }
            });

            // Auto-translate on Enter key in source text
            sourceText.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' && e.ctrlKey) {
                    e.preventDefault();
                    translateBtn.click();
                }
            });

            // Initialize character counts
            updateCharCount('sourceText', 'sourceCharCount');
            updateCharCount('targetText', 'targetCharCount');
            
            // Initial API status
            updateApiStatus(false);
        }

        // Start the application
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>